---
title: "A3: SPL Library Checkouts"
author: "Natalie Olson"
date: "02/22/2023"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE)

# load and install necessary ALL libraries

library(dplyr)
library(tidyverse)
library(readr)
library(ggplot2)
library("lubridate")
library("viridis")

# load library dataframe
library_df <- read_csv("2017-2023-10-Checkouts-SPL-Data.csv")

# source all R files
source('chart1.R')
source('summary.R')


```

### Introduction

An introduction of the data and a description of the trends/books/items you are choosing to analyze (and why!)

When I saw that we were analyzing library data in class, I got super excited. I'm an avid reader, but I'm also super intrigued by popular book trends, especially following the pandemic when BookTok took off and reshaped the reading landscape. For my project, I chose to look at Leigh Bardugo's works in particular and their trends in popularity, as not only is she one of my favorite authors, but her books only seem to increase in popularity over the years.

### Summary Information

Write a summary paragraph of findings that includes the 5 values calculated from your summary information R script

These will likely be calculated using your DPLYR skills, answering questions such as:

- What is the average number of checkouts for each item?
- What is the month or year with the most/least checkouts for a book that you're interested in?
- What is the month or year with the most/least checkouts for ebooks?
- How has the number of print book checkouts changed over time?


Feel free to calculate and report values that you find relevant.

### The Dataset

Seattle Public Library collects their monthly checkout data and publishes it for the public. Some of the parameters in this data set include, title, publication date, checkout month and year, genre, creator, material type, and number of checkouts among other examples. The data is generated from a variety of sources. Overdrive, hoopla, Freegal, and RBDigital provide electronic data for digital items while physical item checkout data was sourced from the Lebgrady artwork data archives from April 2005 to September 2016. Currently, physical item checkout data is collected from the Horizon ILS. This data set essentially acts as a monthly record of library checkouts, holding hundreds of thousands of checkouts over the years. In a sense, it acts as a marker of history from 2005 until the present.
At first glance, this data set is quite messy; certain parameters are formatted strangely, such as Publication Year which has around seven different potential formats that each mean different things. In addition, other fields have such a wide variety of different answers that it may be difficult to find trends that don't occur over such a vast margin, such as when sorting by subjects. There are gaps in the data here and there and plenty of NA values, and given the size of the data set, there is quite a lot to sort through. There are certain variables that would've been useful to track alongside what has already been collected. For example, we may be able to draw conclusions about a book's quality or success based on the number of checkouts, but there isn't any other statistic provided that may strengthen those assumptions such as an average rating from Goodreads or something along those lines. We have no way of knowing the demographics of the people who are checking out items, as all that is tracked is information about the items themselves, so we cannot draw any conclusions about people or culture in relation to checkouts. Ultimately, this data set is just about library checkout data, so its scope only exists within that range.

### First Trends Over Time Chart
# FIRST BOOK IN SERIES POPULARITY OVER TIME

Include a chart. Make sure to describe why you included the chart, and what patterns emerged

The first chart that you will create and include will show the trend over time of your variable/topic/interest. Think carefully about what you want to communicate to your user (you may have to find relevant trends in the dataset first!). Here are some requirements to help guide your design:

- Show more than one, but fewer than ~10 trends
  - For example, two books, or 5 different mediums
- You must have clear x and y axis labels
- The chart needs a clear title 
- You need a legend for your different line colors and a clear - legend title
In your .Rmd file, make sure to describe why you included the chart, and what patterns emerged

When we say "clear" or "human readable" titles and labels, that means that you should not just display the variable name.

Here's an example of how to run an R script inside an RMarkdown file:

``````{r, echo = FALSE, warning = FALSE, code = readLines("chart1.R")}
source("chart1.R")
``````

This line plot tracks total checkouts for each Grishaverse novel from the years 2017-2022. What's notable about these charts is that due to a couple of these novels (**King of Scars** and **Rule of Wolves**) being first published in 2019 and 2021 respectively, there is a lack of checkout data for each of them earlier than that point. What I would like to find out is what Grishaverse novels do people check out the most? How could factors such as BookTok popularity and the release of a TV adaptation influence the number of checkouts for each novel and series?

The Grisha Trilogy (**Shadow and Bone**, **Siege and Storm**, and **Rising and Rising**) was Bardugo's first published trilogy, and as seen in the line chart, this series has been checked out the most from the Seattle Public Library. In particular, the first novel, **Shadow and Bone**, has been checked out **`r summary_info$sab_checkouts`** times between 2017 and 2022! Checkouts for **Shadow and Bone** (and the rest of the Grisha Trilogy by extension) shot up around 2021, which was around the time of the Netflix Adaptation's release, also titled Shadow and Bone.

What I found most interesting about this chart was my own expectations. **Six of Crows** is one of the most widely known and loved young adult fantasy novels of the past few years, and it tops nearly any reader's recommendations list, especially with its popularity on BookTok, so why did the number of checkouts decline after 2021? **Six of Crows** is the only novel of the seven I looked at to face such a noticeable dropoff, as reflected in the series chart as well. Although its sequel, **Crooked Kingdom**, still had a steady number of checkouts between 2021 and 2022 (around 500), the *Gregs Series** still fell off in popularity compared to the **Grisha Trilogy** and the **King of Scars Duology**.

### Second Trends Over Time Chart

Include a chart. Make sure to describe why you included the chart, and what patterns emerged

The second chart that you will create and include will show another trend over time of your variable/topic/interest. Think carefully about what you want to communicate to your user (you may have to find relevant trends in the dataset first!). Here are some requirements to help guide your design:

- Show more than one, but fewer than ~10 trends
  - For example, two books, or 5 different mediums
- You must have clear x and y axis labels
- The chart needs a clear title 
- You need a legend for your different line colors and a clear - legend title
In your .Rmd file, make sure to describe why you included the chart, and what patterns emerged

When we say "clear" or "human readable" titles and labels, that means that you should not just display the variable name.

Here's an example of how to run an R script inside an RMarkdown file:

``````{r, echo = FALSE, code = readLines("chart2.R")}
source("chart2.R")
``````

### Your Choice

The last chart is up to you. It could be a line plot, scatter plot, histogram, bar plot, stacked bar plot, and more. Here are some requirements to help guide your design:

- You must have clear x and y axis labels
- The chart needs a clear title 
- You need a legend for your different line colors and a clear legend title

Here's an example of how to run an R script inside an RMarkdown file:


#``````{r, echo = FALSE, code = readLines("chart2_example.R")}
#``````


